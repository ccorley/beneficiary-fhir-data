mappings:
  - id: FissClaim
    message: gov.cms.mpsm.rda.v1.fiss.FissClaim
    entity: gov.cms.bfd.model.rda.PreAdjFissClaim
    transformer: gov.cms.bfd.pipeline.rda.grpc.source.FissClaimTransformer2
    table:
      name: FissClaims
      schema: pre_adj
      primaryKeyFields:
        - dcn
    enumTypes:
      - name: ServTypeCdMapping
        values:
          - Normal
          - Clinic
          - SpecialFacility
          - Unrecognized
    fields:
      - from: dcn
        optional: false
        column:
          sqlType: varchar(23)
          nullable: false
      - from: seq
        to: sequenceNumber
        optional: false
        column:
          sqlType: bigint
          nullable: false
      - from: hicNo
        optional: false
        column:
          sqlType: varchar(12)
          nullable: false
      - from: currStatus
        optional: false
        column:
          sqlType: varchar(1)
          javaType: char
          nullable: false
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissClaimStatus
      - from: currLoc1
        optional: false
        column:
          sqlType: varchar(1)
          javaType: char
          nullable: false
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissProcessingType
      - from: currLoc2
        optional: false
        column:
          sqlType: varchar(5)
          nullable: false
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissCurrentLocation2
      - from: medaProvId
        column:
          sqlType: varchar(13)
      - from: medaProv6
        to: medaProv_6
        column:
          sqlType: varchar(6)
      - from: totalChargeAmount
        column:
          sqlType: decimal(11,2)
      - from: recdDtCymd
        to: receivedDate
        column:
          sqlType: date
      - from: currTranDtCymd
        to: currTranDate
        column:
          sqlType: date
      - from: admDiagCode
        to: admitDiagCode
        column:
          sqlType: varchar(7)
      - from: principleDiag
        column:
          sqlType: varchar(7)
      - from: npiNumber
        column:
          sqlType: varchar(10)
      - from: mbi
        column:
          sqlType: varchar(13)
      - from: mbi
        to: mbiHash
        transformer: IdHash
        column:
          sqlType: varchar(64)
      - from: fedTaxNb
        to: fedTaxNumber
        column:
          sqlType: varchar(10)
      - from: NONE
        to: lastUpdated
        transformer: Now
        column:
          sqlType: timestamp with time zone
      - from: pracLocAddr1
        column:
          sqlType: varchar(max)
      - from: pracLocAddr2
        column:
          sqlType: varchar(max)
      - from: pracLocCity
        column:
          sqlType: varchar(max)
      - from: pracLocState
        column:
          sqlType: varchar(2)
      - from: pracLocZip
        column:
          sqlType: varchar(max)
      - from: stmtCovFromCymd
        to: stmtCovFromDate
        column:
          sqlType: date
      - from: stmtCovToCymd
        to: stmtCovToDate
        column:
          sqlType: date
      - from: NONE
        to: servTypeCdMapping
        column:
          enumType: ServTypeCdMapping
          sqlType: varchar(20)
      - from: lobCd
        column:
          sqlType: varchar(1)
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBillFacilityType
      - from: servTypeCd
        column:
          sqlType: varchar(1)
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBillClassification
      - from: freqCd
        column:
          sqlType: varchar(1)
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBillFrequency
      - from: billTypCd
        column:
          sqlType: varchar(3)
    arrays:
      - from: claim.fissProcCodes
        to: procCodes
        mapping: FissProcCode
      - from: claim.fissProcCodes
        to: diagCodes
        mapping: FissDiagnosisCode
      - from: claim.fissPayers
        to: payers
        mapping: FissPayer

  - id: FissProcCode
    message: gov.cms.mpsm.rda.v1.fiss.FissProcedureCode
    entity: gov.cms.bfd.model.rda.PreAdjFissProcCode
    table:
      name: FissProcCodes
      schema: pre_adj
      primaryKeyFields:
        - dcn
        - priority
    fields:
      - from: PARENT
        to: dcn
        column:
          sqlType: varchar(23)
          nullable: false
      - from: INDEX
        to: priority
        column:
          sqlType: smallint
          javaType: short
          nullable: false
      - from: procCode
        optional: false
        column:
          sqlType: varchar(10)
          nullable: false
      - from: procFlag
        column:
          sqlType: varchar(4)
      - from: procDate
        column:
          sqlType: date
      - from: PARENT
        to: lastUpdated
        column:
          sqlType: timestamp with time zone

  - id: FissDiagnosisCode
    message: gov.cms.mpsm.rda.v1.fiss.FissDiagnosisCode
    entity: gov.cms.bfd.model.rda.PreAdjFissDiagnosisCode
    table:
      name: FissDiagnosisCodes
      schema: pre_adj
      primaryKeyFields:
        - dcn
        - priority
    fields:
      - from: PARENT
        to: dcn
        column:
          sqlType: varchar(23)
          nullable: false
      - from: INDEX
        to: priority
        column:
          sqlType: smallint
          javaType: short
          nullable: false
      - from: diagCd2
        optional: false
        column:
          sqlType: varchar(7)
          nullable: false
      - from: diagPoaInd
        optional: false
        column:
          sqlType: varchar(1)
          nullable: false
      - from: bitFlags
        column:
          sqlType: varchar(4)
      - from: PARENT
        to: lastUpdated
        column:
          sqlType: timestamp with time zone

  - id: FissPayer
    message: gov.cms.mpsm.rda.v1.fiss.FissPayer
    entity: gov.cms.bfd.model.rda.PreAdjFissPayer
    table:
      name: FissPayers
      schema: pre_adj
      primaryKeyFields:
        - dcn
        - priority
    enumTypes:
      - name: PayerType
        values:
          - BeneZ
          - Insured
    fields:
      - from: PARENT
        to: dcn
        column:
          sqlType: varchar(23)
          nullable: false
      - from: INDEX
        to: priority
        column:
          sqlType: smallint
          javaType: short
          nullable: false
      - from: OBJECT
        to: payerType
        column:
          enumType: PayerType
          sqlType: varchar(20)
      - from: payersId
        optional: false
        column:
          sqlType: varchar(1)
      - from: payersName
        column:
          sqlType: varchar(32)
      - from: relInd
        column:
          sqlType: varchar(1)
      - from: assignInd
        column:
          sqlType: varchar(1)
      - from: providerNumber
        column:
          sqlType: varchar(13)
      - from: adjDcnIcn
        column:
          sqlType: varchar(23)
      - from: priorPmt
        column:
          sqlType: decimal(11,2)
      - from: estAmtDue
        column:
          sqlType: decimal(11,2)
      - from: beneRel
        column:
          sqlType: varchar(2)
      - from: beneLastName
        column:
          sqlType: varchar(15)
      - from: beneFirstName
        column:
          sqlType: varchar(10)
      - from: beneMidInit
        column:
          sqlType: varchar(1)
      - from: beneSsnHic
        column:
          sqlType: varchar(19)
      - from: insuredRel
        column:
          sqlType: varchar(2)
      - from: insuredName
        column:
          sqlType: varchar(25)
      - from: insuredSsnHic
        column:
          sqlType: varchar(19)
      - from: insuredGroupName
        column:
          sqlType: varchar(17)
      - from: insuredGroupNbr
        column:
          sqlType: varchar(20)
      - from: beneDob
        column:
          sqlType: date
      - from: beneSex
        column:
          sqlType: varchar(1)
      - from: treatAuthCd
        column:
          sqlType: varchar(18)
      - from: insuredSex
        column:
          sqlType: varchar(1)
      - from: insuredRelX12
        column:
          sqlType: varchar(2)
      - from: insuredDob
        column:
          sqlType: date
      - from: insuredDobText
        column:
          sqlType: varchar(9)
      - from: PARENT
        to: lastUpdated
        column:
          sqlType: timestamp with time zone
